!function(t){var e={},r=!1,n=!1,i={init:function(){var n="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||0<navigator.maxTouchPoints||0<window.navigator.msMaxTouchPoints;t(document).on("input",".wpforms-form-abandonment :input",i.prepData),t(document).on("change",".wpforms-form-abandonment input[type=radio]",i.prepData),t(document).on("change",".wpforms-form-abandonment input[type=checkbox]",i.prepData),t(document).on("change",".wpforms-form-abandonment .wpforms-timepicker",i.prepData),t(document).on("mouseleave",this.abandonMouse),n?t(document).on("click",this.abandonClick):t(document).on("mousedown",this.abandonClick)},prepData:function(n){var o=t(n.target).closest(".wpforms-form"),a=o.data("formid");e[a]=o.serializeArray(),r=JSON.stringify(e),i.debug("Preping data")},sendData:function(){r&&!n&&(n=!0,setTimeout(function(){n=!1},1e4),i.debug("Sending"),t.post(wpforms_form_abandonment.ajaxurl,{action:"wpforms_form_abandonment",forms:r}),r=!(e={}))},abandonMouse:function(n){n.offsetX<-1||20<n.clientY||(i.debug("Mouse abandoned"),i.sendData())},abandonClick:function(n){for(var o=n.srcElement||n.target;o&&(void 0===o.tagName||"a"!==o.tagName.toLowerCase()||!o.href);)o=o.parentNode;if(o&&o.href){i.debug("Click abandoned");var a=o.href,t="internal";if("mailto"===o.protocol?t="mailto":-1===a.indexOf(wpforms_form_abandonment.home_url)&&(t="external"),("external"===t||"internal"===t)&&!a.match(/^javascript\:/i)){var e=!(!o.target||o.target.match(/^_(self|parent|top)$/i))&&o.target;(n.ctrlKey||n.shiftKey||n.metaKey||2===n.which)&&(e="_blank"),e?i.sendData():(n.preventDefault?n.preventDefault():n.returnValue=!1,i.sendData(),window.location.href=a)}}},debug:function(n){window.location.hash&&"#wpformsfadebug"===window.location.hash&&console.log("WPForms FA: "+n)}};i.init()}(jQuery);